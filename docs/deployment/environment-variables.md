# Environment Variables Reference

Complete reference for all environment variables used in Crucible Community Edition.

## Auto-Generated Variables

These are automatically generated by the setup scripts. You typically don't need to set them manually.

| Variable | Purpose | Generated Value |
|----------|---------|----------------|
| `API_KEY_ENCRYPTION_KEY` | Encrypts user API keys stored in database | 32-character URL-safe token |
| `ROUNDTABLE_JWT_SECRET` | JWT token signing for authentication | 48-character URL-safe token |
| `ROUNDTABLE_JWT_REFRESH_SECRET` | JWT refresh token signing | 48-character URL-safe token |
| `ROUNDTABLE_COMMUNITY_AUTH_PASSWORD` | Login password for `admin@community.local` | 16-character URL-safe token (or hashed password) |
| `POSTGRES_USER` | PostgreSQL database username | 12-character alphanumeric |
| `POSTGRES_PASSWORD` | PostgreSQL database password | 24-character URL-safe token |
| `REDIS_PASSWORD` | Redis authentication password | 32-character URL-safe token |

## Frontend Variables

### Site Configuration

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `NEXT_PUBLIC_SITE_URL` | Main site URL (for metadata, Open Graph) | `http://localhost:3000` | No |
| `NEXT_PUBLIC_APP_URL` | App subdomain URL | `http://localhost:3000` | No |
| `NEXT_PUBLIC_DOCS_URL` | Documentation URL | `/docs` | No |

### Company Information

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `NEXT_PUBLIC_COMPANY_NAME` | Company name for branding | `Crucible Community` | No |
| `NEXT_PUBLIC_LEGAL_COMPANY_NAME` | Legal company name | `Crucible Community` | No |
| `NEXT_PUBLIC_COMPANY_ABN` | Company ABN/Registration Number | - | No |
| `NEXT_PUBLIC_COMPANY_ADDRESS` | Company address | - | No |

### Contact Emails

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `NEXT_PUBLIC_CONTACT_EMAIL` | General contact email | `support@example.com` | No |
| `NEXT_PUBLIC_PRIVACY_EMAIL` | Privacy email | `privacy@example.com` | No |
| `NEXT_PUBLIC_SUPPORT_EMAIL` | Support email | `support@example.com` | No |
| `NEXT_PUBLIC_SECURITY_EMAIL` | Security email | `security@example.com` | No |
| `NEXT_PUBLIC_ABUSE_EMAIL` | Abuse reporting email | `abuse@example.com` | No |
| `NEXT_PUBLIC_COPYRIGHT_EMAIL` | Copyright/DMCA email | `copyright@example.com` | No |
| `NEXT_PUBLIC_MODERATION_EMAIL` | Content moderation email | `moderation@example.com` | No |

### Social Media (Optional)

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `NEXT_PUBLIC_SOCIAL_TWITTER` | Twitter/X profile URL | - | No |
| `NEXT_PUBLIC_SOCIAL_LINKEDIN` | LinkedIn company page URL | - | No |
| `NEXT_PUBLIC_SOCIAL_GITHUB` | GitHub organization/repo URL | - | No |
| `NEXT_PUBLIC_TWITTER_HANDLE` | Twitter handle for metadata | - | No |
| `NEXT_PUBLIC_STATUS_URL` | Status page URL | - | No |

### API Configuration

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `NEXT_PUBLIC_API_URL` | Backend API URL | `http://localhost:8000/api` | Yes |

### NextAuth Configuration

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `NEXTAUTH_URL` | NextAuth base URL | `http://localhost:3000` | Yes |
| `NEXTAUTH_SECRET` | NextAuth encryption secret | - | Yes |
| `AUTH_DATABASE_URL` | PostgreSQL connection for NextAuth | - | Yes |

### OAuth Providers (Optional)

| Variable | Purpose | Required |
|----------|---------|----------|
| `GOOGLE_CLIENT_ID` | Google OAuth client ID | No |
| `GOOGLE_CLIENT_SECRET` | Google OAuth client secret | No |
| `LINKEDIN_CLIENT_ID` | LinkedIn OAuth client ID | No |
| `LINKEDIN_CLIENT_SECRET` | LinkedIn OAuth client secret | No |
| `MICROSOFT_CLIENT_ID` | Microsoft OAuth client ID | No |
| `MICROSOFT_CLIENT_SECRET` | Microsoft OAuth client secret | No |
| `MICROSOFT_TENANT_ID` | Microsoft tenant ID | No |

### Turnstile (Optional)

| Variable | Purpose | Required |
|----------|---------|----------|
| `NEXT_PUBLIC_TURNSTILE_SITE_KEY` | Cloudflare Turnstile site key | No |
| `TURNSTILE_SECRET_KEY` | Cloudflare Turnstile secret key | No |

## Backend Variables

### Database

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `ROUNDTABLE_DATABASE_URL` | PostgreSQL connection string | - | Yes |
| `ROUNDTABLE_REDIS_URL` | Redis connection string | `redis://localhost:6379/0` | No |

### Authentication

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `ROUNDTABLE_JWT_SECRET` | JWT signing secret | - | Yes |
| `ROUNDTABLE_JWT_REFRESH_SECRET` | JWT refresh secret | - | Yes |
| `ROUNDTABLE_COMMUNITY_AUTH_PASSWORD` | Community edition password | - | Yes (Community Edition) |

### API Keys

| Variable | Purpose | Required |
|----------|---------|----------|
| `ROUNDTABLE_OPENROUTER_API_KEY` | OpenRouter API key | No (can set in UI) |
| `ROUNDTABLE_EDEN_AI_API_KEY` | Eden AI API key | No |
| `API_KEY_ENCRYPTION_KEY` | Encryption key for user API keys | Yes |

### CORS and URLs

| Variable | Purpose | Default | Required |
|----------|---------|---------|----------|
| `ROUNDTABLE_CORS_ORIGINS` | Allowed CORS origins | `http://localhost:3000` | No |
| `ROUNDTABLE_FRONTEND_URL` | Frontend URL | `http://localhost:3000` | No |

## Production Considerations

### Security

- **Never commit `.env` to version control**
- **Backup `.env` file securely** - Contains encryption keys
- **Use strong, unique secrets** for production
- **Hash passwords** using `python -m scripts.hash_password`

### Performance

- Configure resource limits in Docker Compose
- Monitor database connection pool settings
- Adjust Redis memory limits as needed

## Configuration Examples

### Minimal Production Setup

```bash
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
NEXT_PUBLIC_API_URL=https://yourdomain.com/api
ROUNDTABLE_CORS_ORIGINS=https://yourdomain.com
ROUNDTABLE_COMMUNITY_AUTH_PASSWORD=<hashed-password>
```

### Full Customization

```bash
# Site
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
NEXT_PUBLIC_COMPANY_NAME=Your Company
NEXT_PUBLIC_CONTACT_EMAIL=support@yourdomain.com

# API
ROUNDTABLE_OPENROUTER_API_KEY=sk-or-v1-...
ROUNDTABLE_CORS_ORIGINS=https://yourdomain.com

# External Databases
ROUNDTABLE_DATABASE_URL=postgresql+asyncpg://user:pass@external-host:5432/roundtable
ROUNDTABLE_REDIS_URL=redis://:password@external-host:6379/0
```

## See Also

- [.env.example](../.env.example) - Template with detailed comments
- [Configuration Guide](../configuration/README.md) - Customization options
- [Production Deployment](production.md) - Production setup
